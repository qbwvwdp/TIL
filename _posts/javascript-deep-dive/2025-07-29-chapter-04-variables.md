---
layout: post
title: "Chapter 04: ë³€ìˆ˜"
date: 2025-07-29
categories: [javascript-deep-dive]
tags: [javascript, deep-dive, chapter04, variables, hoisting, scope]
---

# Chapter 04: ë³€ìˆ˜

## ğŸ“ í•µì‹¬ ê°œë… ìš”ì•½
- **ë³€ìˆ˜**ëŠ” ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ë©”ëª¨ë¦¬ ê³µê°„ê³¼ ê·¸ê²ƒì„ ì‹ë³„í•˜ëŠ” ì´ë¦„
- **ì‹ë³„ì**ëŠ” ë³€ìˆ˜ëª…, í•¨ìˆ˜ëª… ë“±ì„ í¬í•¨í•˜ëŠ” ìƒìœ„ ê°œë…
- **var vs let**: í˜¸ì´ìŠ¤íŒ… ë™ì‘ê³¼ ìŠ¤ì½”í”„ ê·œì¹™ì´ ë‹¤ë¦„
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ì¬í• ë‹¹ ì‹œ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ê³µê°„ í™•ë³´, ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ìë™ ì •ë¦¬

## ğŸ“š ìš©ì–´ ì‚¬ì „
{% assign terms = site.data.glossary.javascript | where: "chapter", "04" %}
{% for term in terms %}
**{{ term.term }}**({{ term.english }}): {{ term.definition }}
{% if term.example %}
```javascript
{{ term.example }}
```
{% endif %}
{% endfor %}

**IIFE**(Immediately Invoked Function Expression): ì •ì˜ì™€ ë™ì‹œì— ì¦‰ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ í‘œí˜„ì‹ìœ¼ë¡œ, ë…ë¦½ì ì¸ ìŠ¤ì½”í”„ë¥¼ ìƒì„±í•˜ì—¬ ë³€ìˆ˜ ì¶©ëŒì„ ë°©ì§€í•˜ê³  ê°’ì„ ìº¡ì²˜í•˜ëŠ” ë° ì‚¬ìš©
```javascript
(function(param) {
  // ë…ë¦½ì ì¸ ìŠ¤ì½”í”„
  console.log(param);
})(value); // ì¦‰ì‹œ ì‹¤í–‰
```

## âš–ï¸ JavaScript vs C++ ë¹„êµ

| êµ¬ë¶„ | JavaScript | C++ |
|------|------------|-----|
| **ë³€ìˆ˜ ì„ ì–¸** | `var/let/const name` | `type name` |
| **íƒ€ì… ì‹œìŠ¤í…œ** | ë™ì  íƒ€ì… (ëŸ°íƒ€ì„ ê²°ì •) | ì •ì  íƒ€ì… (ì»´íŒŒì¼ íƒ€ì„ ê²°ì •) |
| **ë©”ëª¨ë¦¬ ê´€ë¦¬** | ìë™ (ê°€ë¹„ì§€ ì»¬ë ‰í„°) | ìˆ˜ë™ (`new/delete`) |
| **í˜¸ì´ìŠ¤íŒ…** | var: undefined ì´ˆê¸°í™”<br>let: TDZ | ì—†ìŒ (ì„ ì–¸ ìˆœì„œ ì¤‘ìš”) |
| **ìŠ¤ì½”í”„** | var: í•¨ìˆ˜ ìŠ¤ì½”í”„<br>let: ë¸”ë¡ ìŠ¤ì½”í”„ | ë¸”ë¡ ìŠ¤ì½”í”„ |
| **ì¬í• ë‹¹** | ìƒˆ ë©”ëª¨ë¦¬ ê³µê°„ í™•ë³´ | ê°™ì€ ë©”ëª¨ë¦¬ ê³µê°„ ê°’ ë³€ê²½ |

## ğŸ§ª í•µì‹¬ ì‹¤í—˜ ì½”ë“œ

### ì‹¤í—˜ 1: ì‹ë³„ì vs ë³€ìˆ˜
```javascript
// ì‹ë³„ìëŠ” ì´ë¦„, ë³€ìˆ˜ëŠ” ë©”ëª¨ë¦¬ ê³µê°„ + ì´ë¦„
var score = 100;  // score: ì‹ë³„ì, ì „ì²´: ë³€ìˆ˜
//  â†‘       â†‘
// ì´ë¦„   ë©”ëª¨ë¦¬ ê³µê°„ì˜ ê°’
```

### ì‹¤í—˜ 2: TDZ (Temporal Dead Zone) ì‹¬í™”
```javascript
// TDZ: ì„ ì–¸ë˜ì—ˆì§€ë§Œ ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ "ì¼ì‹œì  ì‚¬ê°ì§€ëŒ€"
{
  // â† ì—¬ê¸°ì„œë¶€í„° TDZ ì‹œì‘
  console.log(letVar); // ReferenceError! (TDZ êµ¬ê°„)
  let letVar = "ê°’";   // â† ì—¬ê¸°ì„œ TDZ ì¢…ë£Œ
}
```

**TDZ ì¡´ì¬ ì´ìœ **: ì„ ì–¸ ì „ ì ‘ê·¼ì„ ì°¨ë‹¨í•˜ì—¬ **ë²„ê·¸ ì˜ˆë°©**
**ìƒëª…ì£¼ê¸°**: ì„ ì–¸ â†’ (TDZ) â†’ ì´ˆê¸°í™” â†’ ì‚¬ìš© ê°€ëŠ¥

### ì‹¤í—˜ 3: ë©”ëª¨ë¦¬ ì¬í• ë‹¹
```javascript
var value = 100;    // ë©”ëª¨ë¦¬ ì£¼ì†Œ 0x001
value = 200;        // ìƒˆ ì£¼ì†Œ 0x002ì— 200 ì €ì¥
value = "ë¬¸ìì—´";   // ìƒˆ ì£¼ì†Œ 0x003ì— ë¬¸ìì—´ ì €ì¥
```

**ê²°ê³¼**: JavaScriptëŠ” ë¶ˆë³€ê°’ ì›ì¹™ìœ¼ë¡œ í•­ìƒ ìƒˆ ë©”ëª¨ë¦¬ ê³µê°„ í™•ë³´

**ğŸ”¬ ì „ì²´ ì‹¤í—˜ ì½”ë“œ**: [chapter04-variables.js]({{ site.baseurl }}/assets/experiments/javascript/chapter04-variables.js)  
**ğŸ”— C++ ë¹„êµ ì½”ë“œ**: [comparison-variables.cpp]({{ site.baseurl }}/assets/experiments/cpp/comparison-variables.cpp)  
**ğŸ“Š í˜¸ì´ìŠ¤íŒ… ì‹¤í—˜**: [hoisting-test.js]({{ site.baseurl }}/assets/experiments/javascript/hoisting-test.js)  
**ğŸ¯ TDZ & var ë¬¸ì œì **: [tdz-and-var-problems.js]({{ site.baseurl }}/assets/experiments/javascript/tdz-and-var-problems.js)  
**âš¡ ë™ê¸°/ë¹„ë™ê¸° ë¹„êµ**: [sync-async-for-loop.js]({{ site.baseurl }}/assets/experiments/javascript/sync-async-for-loop.js)

## ğŸ’¼ ì‹¤ë¬´ ì ìš© ì‚¬ë¡€

### 1. ëª¨ë˜ JavaScriptì—ì„œëŠ” let/const ì‚¬ìš©
```javascript
// ë ˆê±°ì‹œ ì½”ë“œ (ES5 ì´ì „)
var userName = "John";

// ëª¨ë˜ ì½”ë“œ (ES6+)
let userName = "John";        // ì¬í• ë‹¹ í•„ìš”ì‹œ
const API_KEY = "abc123";     // ìƒìˆ˜ê°’
```

### 2. varì˜ í•µì‹¬ ë¬¸ì œì ê³¼ í•´ê²°

#### âš ï¸ ë¬¸ì œ 1: ì§€ì—°ëœ í´ë¡œì € + í•¨ìˆ˜ ìŠ¤ì½”í”„
```javascript
// âŒ ë¬¸ì œ ìƒí™©: ë¹„ë™ê¸° + var
for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i)); // 3, 3, 3
}

// âœ… ì •ìƒ ë™ì‘: ë™ê¸° ì‹¤í–‰
for (var i = 0; i < 3; i++) {
  console.log(i); // 0, 1, 2 ì •ìƒ!
}
```

**ì™œ 3ë§Œ ì¶œë ¥ë˜ë‚˜?**
1. `var i`ëŠ” í•¨ìˆ˜ ìŠ¤ì½”í”„ â†’ ë°˜ë³µë¬¸ ë°–ì—ì„œë„ ì ‘ê·¼ ê°€ëŠ¥
2. ë°˜ë³µë¬¸ ì¢…ë£Œ í›„ `i = 3`
3. ë‚˜ì¤‘ì— ì‹¤í–‰ëœ ì½œë°±ë“¤ì´ ëª¨ë‘ ê°™ì€ `i(=3)` ì°¸ì¡°

#### âœ… í•´ê²° ë°©ë²•
```javascript
// ë°©ë²• 1: let ì‚¬ìš© (ê¶Œì¥)
for (let i = 0; i < 3; i++) {
  setTimeout(() => console.log(i)); // 0, 1, 2
}

// ë°©ë²• 2: IIFEë¡œ ê°’ ìº¡ì²˜
for (var i = 0; i < 3; i++) {
  // IIFE(ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜): ê° ë°˜ë³µë§ˆë‹¤ ë…ë¦½ì ì¸ ìŠ¤ì½”í”„ ìƒì„±
  (function(captured) {           // captured ë§¤ê°œë³€ìˆ˜ë¡œ í˜„ì¬ i ê°’ì„ ê³ ì •
    setTimeout(() => console.log(captured)); // ê³ ì •ëœ ê°’(0,1,2) ì¶œë ¥
  })(i);                         // í˜„ì¬ i ê°’ì„ ì¦‰ì‹œ ì „ë‹¬í•˜ì—¬ ì‹¤í–‰
}
```

#### âš ï¸ ë¬¸ì œ 2: var ì‚¬ìš©í•˜ëŠ” ì´ìœ ?
- **99%**: ë ˆê±°ì‹œ ì½”ë“œ, êµ¬í˜• ë¸Œë¼ìš°ì € ì§€ì›
- **1%**: ì˜ë„ì  í•¨ìˆ˜ ìŠ¤ì½”í”„ í™œìš© (ë§¤ìš° ë“œë¬¸ ì¼€ì´ìŠ¤)
- **ê²°ë¡ **: ëª¨ë˜ JavaScriptì—ì„œëŠ” `let/const` ê¶Œì¥

### 3. TDZë¥¼ í™œìš©í•œ ì•ˆì „í•œ ì½”ë“œ
```javascript
// let/constëŠ” ì„ ì–¸ ì „ ì ‘ê·¼ì„ ì°¨ë‹¨í•˜ì—¬ ë²„ê·¸ ì˜ˆë°©
console.log(safeVar); // ReferenceErrorë¡œ ì¦‰ì‹œ ë°œê²¬
let safeVar = "ì•ˆì „í•œ ë³€ìˆ˜";
```

## ğŸ¤” ì¶”ê°€ íƒêµ¬ì 
- [ ] **TDZ ì‹¬í™”**: constì™€ letì˜ TDZ ì°¨ì´ì 
- [ ] **í´ë¡œì € ìµœì í™”**: V8 ì—”ì§„ì˜ í´ë¡œì € ë©”ëª¨ë¦¬ ê´€ë¦¬
- [ ] **ìŠ¤ì½”í”„ ì²´ì¸**: Lexical Environmentì™€ Variable Environment êµ¬ì¡°
- [ ] **í•¨ìˆ˜ í˜¸ì´ìŠ¤íŒ…**: í•¨ìˆ˜ ì„ ì–¸ë¬¸ vs í•¨ìˆ˜ í‘œí˜„ì‹ vs í™”ì‚´í‘œ í•¨ìˆ˜
- [ ] **ì‹¤ë¬´ ì ìš©**: ë ˆê±°ì‹œ ì½”ë“œì—ì„œ var â†’ let/const ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ
- [ ] **ì„±ëŠ¥ ë¹„êµ**: var vs let ëŸ°íƒ€ì„ ì„±ëŠ¥ ì°¨ì´
- [ ] **Babel íŠ¸ëœìŠ¤íŒŒì¼**: ES6+ â†’ ES5 ë³€í™˜ ì‹œ ìŠ¤ì½”í”„ ì²˜ë¦¬ ë°©ì‹

---
**ë‹¤ìŒ ì±•í„°**: [Chapter 05: í‘œí˜„ì‹ê³¼ ë¬¸](ë§í¬)  
**ì´ì „ ì±•í„°**: [Chapter 03: ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë°œ í™˜ê²½ê³¼ ì‹¤í–‰ ë°©ë²•](ë§í¬)